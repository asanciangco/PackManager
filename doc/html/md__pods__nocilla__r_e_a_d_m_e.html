<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Pack-Manager: Nocilla [![CI Status](http://img.shields.io/travis/luisobo/Nocilla.svg?style=flat&amp;branch=master)](https://travis-ci.org/luisobo/Nocilla)[![Version](https://img.shields.io/cocoapods/v/Nocilla.svg?style=flat)](http://cocoadocs.org/docsets/Nocilla)[![License](https://img.shields.io/cocoapods/l/Nocilla.svg?style=flat)](http://cocoadocs.org/docsets/Nocilla)[![Platform](https://img.shields.io/cocoapods/p/Nocilla.svg?style=flat)](http://cocoadocs.org/docsets/Nocilla)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Pack-Manager
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Nocilla [![CI Status](<a href="http://img.shields.io/travis/luisobo/Nocilla.svg?style=flat&branch=master">http://img.shields.io/travis/luisobo/Nocilla.svg?style=flat&amp;branch=master</a>)](<a href="https://travis-ci.org/luisobo/Nocilla">https://travis-ci.org/luisobo/Nocilla</a>)[![Version](<a href="https://img.shields.io/cocoapods/v/Nocilla.svg?style=flat">https://img.shields.io/cocoapods/v/Nocilla.svg?style=flat</a>)](<a href="http://cocoadocs.org/docsets/Nocilla">http://cocoadocs.org/docsets/Nocilla</a>)[![License](<a href="https://img.shields.io/cocoapods/l/Nocilla.svg?style=flat">https://img.shields.io/cocoapods/l/Nocilla.svg?style=flat</a>)](<a href="http://cocoadocs.org/docsets/Nocilla">http://cocoadocs.org/docsets/Nocilla</a>)[![Platform](<a href="https://img.shields.io/cocoapods/p/Nocilla.svg?style=flat">https://img.shields.io/cocoapods/p/Nocilla.svg?style=flat</a>)](<a href="http://cocoadocs.org/docsets/Nocilla">http://cocoadocs.org/docsets/Nocilla</a>) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Stunning HTTP stubbing for iOS and OS X. Testing HTTP requests has never been easier.</p>
<p>This library was inspired by <a href="https://github.com/bblimke/webmock">WebMock</a> and it's using <a href="http://www.infinite-loop.dk/blog/2011/09/using-nsurlprotocol-for-injecting-test-data/">this approach</a> to stub the requests.</p>
<h2>Features</h2>
<ul>
<li>Stub HTTP and HTTPS requests in your unit tests.</li>
<li>Supports NSURLConnection, NSURLSession and <a class="el" href="interface_a_s_i_h_t_t_p_request.html">ASIHTTPRequest</a>.</li>
<li>Awesome DSL that will improve the readability and maintainability of your tests.</li>
<li>Match requests with regular expressions.</li>
<li>Stub requests with errors.</li>
<li>Tested.</li>
<li>Fast.</li>
<li>Extendable to support more HTTP libraries.</li>
</ul>
<h2>Installation</h2>
<h3>As a <a href="http://cocoapods.org/">CocoaPod</a></h3>
<p>Just add this to your Podfile ```ruby pod 'Nocilla' ```</p>
<h3>Other approaches</h3>
<ul>
<li>You should be able to add Nocilla to you source tree. If you are using git, consider using a <code>git submodule</code></li>
</ul>
<h2>Usage</h2>
<p><em>Yes, the following code is valid Objective-C, or at least, it should be</em></p>
<p>The following examples are described using <a href="https://github.com/kiwi-bdd/Kiwi">Kiwi</a></p>
<h3>Common parts</h3>
<p>Until Nocilla can hook directly into Kiwi, you will have to include the following snippet in the specs you want to use Nocilla:</p>
<p>```objc #import "Kiwi.h" #import "Nocilla.h" SPEC_BEGIN(ExampleSpec) beforeAll(^{ [[<a class="el" href="interface_l_s_nocilla.html">LSNocilla</a> sharedInstance] start]; }); afterAll(^{ [[<a class="el" href="interface_l_s_nocilla.html">LSNocilla</a> sharedInstance] stop]; }); afterEach(^{ [[<a class="el" href="interface_l_s_nocilla.html">LSNocilla</a> sharedInstance] clearStubs]; });</p>
<p>it("should do something", ^{ // Stub here! }); SPEC_END ```</p>
<h3>Stubbing requests</h3>
<h4>Stubbing a simple request</h4>
<p>It will return the default response, which is a 200 and an empty body.</p>
<p>```objc stubRequest("GET", @"<a href="http://www.google.com">http://www.google.com</a>"); ```</p>
<h4>Stubbing requests with regular expressions</h4>
<p>```objc stubRequest("GET", @"^http://(.*?)\.example\.com/v1/dogs\.json".regex); ```</p>
<h4>Stubbing a request with a particular header</h4>
<p>```objc stubRequest("GET", @"<a href="https://api.example.com">https://api.example.com</a>").
withHeader(@"Accept", @"application/json"); ```</p>
<h4>Stubbing a request with multiple headers</h4>
<p>Using the <code>withHeaders</code> method makes sense with the Objective-C literals, but it accepts an NSDictionary.</p>
<p>```objc stubRequest("GET", @"<a href="https://api.example.com/dogs.json">https://api.example.com/dogs.json</a>").
withHeaders(@"Accept": @"application/json", @"X-CUSTOM-HEADER": @"abcf2fbc6abgf"}); ```</p>
<h4>Stubbing a request with a particular body</h4>
<p>```objc stubRequest("POST", @"<a href="https://api.example.com/dogs.json">https://api.example.com/dogs.json</a>").
withHeaders(@"Accept": @"application/json", @"X-CUSTOM-HEADER": @"abcf2fbc6abgf"}).
withBody(@"{"name":"foo"}"); ```</p>
<p>You can also use <code>NSData</code> for the request body:</p>
<p>```objc stubRequest("POST", @"<a href="https://api.example.com/dogs.json">https://api.example.com/dogs.json</a>").
withHeaders(@"Accept": @"application/json", @"X-CUSTOM-HEADER": @"abcf2fbc6abgf"}).
withBody([@"foo" dataUsingEncoding:NSUTF8StringEncoding]); ```</p>
<p>It even works with regular expressions!</p>
<p>```objc stubRequest("POST", @"<a href="https://api.example.com/dogs.json">https://api.example.com/dogs.json</a>").
withHeaders(@"Accept": @"application/json", @"X-CUSTOM-HEADER": @"abcf2fbc6abgf"}).
withBody(@"^The body start with this".regex); ```</p>
<h4>Returning a specific status code</h4>
<p>```objc stubRequest("GET", @"<a href="http://www.google.com">http://www.google.com</a>").andReturn(404); ```</p>
<h4>Returning a specific status code and header</h4>
<p>The same approch here, you can use <code>withHeader</code> or <code>withHeaders</code></p>
<p>```objc stubRequest("POST", @"<a href="https://api.example.com/dogs.json">https://api.example.com/dogs.json</a>"). andReturn(201). withHeaders("Content-Type": @"application/json"}); ```</p>
<h4>Returning a specific status code, headers and body</h4>
<p>```objc stubRequest("GET", @"<a href="https://api.example.com/dogs.json">https://api.example.com/dogs.json</a>"). andReturn(201). withHeaders("Content-Type": @"application/json"}).
withBody(@"{"ok":true}"); ```</p>
<p>You can also use <code>NSData</code> for the response body:</p>
<p>```objc stubRequest("GET", @"<a href="https://api.example.com/dogs.json">https://api.example.com/dogs.json</a>"). andReturn(201). withHeaders("Content-Type": @"application/json"}).
withBody([@"bar" dataUsingEncoding:NSUTF8StringEncoding]); ```</p>
<h4>Returning raw responses recorded with <code>curl -is</code></h4>
<p><code>curl -is <a href="http://api.example.com/dogs.json">http://api.example.com/dogs.json</a> &gt; /tmp/example_curl_-is_output.txt</code></p>
<p>```objc stubRequest("GET", @"<a href="https://api.example.com/dogs.json">https://api.example.com/dogs.json</a>").
andReturnRawResponse([NSData dataWithContentsOfFile:@"/tmp/example_curl_-is_output.txt"]); ```</p>
<h4>All together</h4>
<p>```objc stubRequest("POST", @"<a href="https://api.example.com/dogs.json">https://api.example.com/dogs.json</a>").
withHeaders(@"Accept": @"application/json", @"X-CUSTOM-HEADER": @"abcf2fbc6abgf"}).
withBody(@"{"name":"foo"}"). andReturn(201). withHeaders("Content-Type": @"application/json"}).
withBody(@"{"ok":true}"); ```</p>
<h4>Making a request fail</h4>
<p>This will call the failure handler (callback, delegate... whatever your HTTP client uses) with the specified error.</p>
<p>```objc stubRequest("POST", @"<a href="https://api.example.com/dogs.json">https://api.example.com/dogs.json</a>").
withHeaders(@"Accept": @"application/json", @"X-CUSTOM-HEADER": @"abcf2fbc6abgf"}).
withBody(@"{"name":"foo"}").
andFailWithError([NSError errorWithDomain:@"foo" code:123 userInfo:nil]); ```</p>
<h3>Unexpected requests</h3>
<p>If some request is made but it wasn't stubbed, Nocilla won't let that request hit the real world. In that case your test should fail. At this moment Nocilla will raise an exception with a meaningful message about the error and how to solve it, including a snippet of code on how to stub the unexpected request.</p>
<h2>Other alternatives</h2>
<ul>
<li><a href="https://github.com/InfiniteLoopDK/ILTesting">ILTesting</a></li>
<li><a href="https://github.com/AliSoftware/OHHTTPStubs">OHHTTPStubs</a></li>
</ul>
<h2>Contributing</h2>
<ol type="1">
<li>Fork it</li>
<li>Create your feature branch</li>
<li>Commit your changes</li>
<li>Push to the branch</li>
<li>Create new Pull Request </li>
</ol>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu May 28 2015 16:33:31 for Pack-Manager by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
